[gd_scene load_steps=13 format=3 uid="uid://l3yji6t2u1gr"]

[ext_resource type="Script" path="res://Scripts/world.gd" id="1_gkggp"]
[ext_resource type="Script" path="res://Scripts/Player.gd" id="1_pshd1"]
[ext_resource type="PackedScene" uid="uid://dhudi52kk631y" path="res://Scenes/Gun.tscn" id="2_fc48i"]
[ext_resource type="PackedScene" uid="uid://ojmen7b64sn1" path="res://Scenes/future_soldier.tscn" id="4_anyqg"]
[ext_resource type="Script" path="res://Scripts/future_soldier.gd" id="5_8w6w7"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_3y4ak"]
sky_horizon_color = Color(0.64625, 0.65575, 0.67075, 1)
ground_horizon_color = Color(0.64625, 0.65575, 0.67075, 1)

[sub_resource type="Sky" id="Sky_ale1i"]
sky_material = SubResource("ProceduralSkyMaterial_3y4ak")

[sub_resource type="Environment" id="Environment_088vp"]
background_mode = 2
sky = SubResource("Sky_ale1i")
tonemap_mode = 2
glow_enabled = true

[sub_resource type="NavigationMesh" id="NavigationMesh_6ipjk"]
vertices = PackedVector3Array(-2.78149, -0.00421607, -0.125504, -1.28149, -0.00421607, -0.125504, -1.28149, -0.00421607, -0.875504, -3.03149, -0.00421607, -0.875504, 7.21851, -0.00421607, -14.1255, 8.46851, -0.00421607, -13.8755, 25.2185, -0.00421607, -12.6255, 25.2185, -0.00421607, -149.376, -14.7815, -0.00421607, -0.875504, -14.5315, -0.00421607, 0.124496, -13.0315, -0.00421607, 0.124496, -12.5315, -0.00421607, -0.875504, -10.5315, -0.00421607, 0.124496, -9.03149, -0.00421607, 0.124496, -8.78149, -0.00421607, -0.875504, -11.0315, -0.00421607, -0.875504, -7.03149, -0.00421607, -0.875504, -6.78149, -0.00421607, -0.125504, -5.03149, -0.00421607, -0.125504, -4.78149, -0.00421607, -0.875504, -16.0315, -0.00421607, 37.6245, -16.0315, -0.00421607, 1.3745, -16.7815, -0.00421607, 1.1245, -126.781, -0.00421607, 37.6245, -17.0315, -0.00421607, 0.374496, -16.5315, -0.00421607, -0.875504, -16.0315, -0.00421607, 37.6245, -16.7815, -0.00421607, 1.1245, -17.0315, -0.00421607, 0.374496, -126.781, -0.00421607, 37.6245, -3.03149, -0.00421607, -0.875504, -1.28149, -0.00421607, -0.875504, 0.218506, -0.00421607, -1.6255, -4.78149, -0.00421607, -0.875504, -3.03149, -0.00421607, -0.875504, 0.218506, -0.00421607, -1.6255, 1.96851, -0.00421607, -1.6255, 2.21851, -0.00421607, -0.625504, 6.96851, -0.00421607, -0.625504, 7.21851, -0.00421607, -14.1255, -7.03149, -0.00421607, -0.875504, -4.78149, -0.00421607, -0.875504, 0.218506, -0.00421607, -1.6255, -8.78149, -0.00421607, -0.875504, -7.03149, -0.00421607, -0.875504, 0.218506, -0.00421607, -1.6255, -11.0315, -0.00421607, -0.875504, -8.78149, -0.00421607, -0.875504, 0.218506, -0.00421607, -1.6255, -12.5315, -0.00421607, -0.875504, -11.0315, -0.00421607, -0.875504, 0.218506, -0.00421607, -1.6255, -126.781, -0.00421607, 37.6245, -16.5315, -0.00421607, -0.875504, 7.21851, -0.00421607, -14.1255, 25.2185, -0.00421607, -149.376, -126.781, -0.00421607, -149.376, 0.218506, -0.00421607, -1.6255, 1.96851, -0.00421607, -1.6255, 7.21851, -0.00421607, -14.1255, -14.7815, -0.00421607, -0.875504, -12.5315, -0.00421607, -0.875504, 0.218506, -0.00421607, -1.6255, -16.5315, -0.00421607, -0.875504, -14.7815, -0.00421607, -0.875504, 0.218506, -0.00421607, -1.6255, 7.21851, -0.00421607, -14.1255, 8.46851, -0.00421607, -13.8755, 8.46851, -0.00421607, -12.3755, 25.2185, -0.00421607, -12.6255, 8.46851, -0.00421607, -12.3755, 8.46851, -0.00421607, 1.1245, 25.2185, -0.00421607, 1.3745, 25.2185, -0.00421607, -12.6255, -8.78149, -0.00421607, 0.874496, -9.03149, -0.00421607, 0.124496, -10.5315, -0.00421607, 0.124496, -11.0315, -0.00421607, 1.1245, -1.28149, -0.00421607, -0.125504, -2.78149, -0.00421607, -0.125504, -3.03149, -0.00421607, 0.874496, -1.03149, -0.00421607, 0.874496, 25.2185, -0.00421607, 1.3745, 8.46851, -0.00421607, 1.1245, 8.46851, -0.00421607, 2.6245, -4.78149, -0.00421607, 0.874496, -5.03149, -0.00421607, -0.125504, -6.78149, -0.00421607, -0.125504, -7.03149, -0.00421607, 0.874496, 25.2185, -0.00421607, 1.3745, 8.46851, -0.00421607, 2.6245, 7.21851, -0.00421607, 2.8745, 25.2185, -0.00421607, 37.6245, -1.03149, -0.00421607, 0.874496, -3.03149, -0.00421607, 0.874496, -11.0315, -0.00421607, 1.1245, 7.21851, -0.00421607, 2.8745, -7.03149, -0.00421607, 0.874496, -8.78149, -0.00421607, 0.874496, -11.0315, -0.00421607, 1.1245, 6.96851, -0.00421607, -0.625504, 2.21851, -0.00421607, -0.625504, 1.96851, -0.00421607, 0.374496, 7.21851, -0.00421607, 2.8745, 6.96851, -0.00421607, -0.625504, 1.96851, -0.00421607, 0.374496, 0.718506, -0.00421607, 0.874496, -4.78149, -0.00421607, 0.874496, -7.03149, -0.00421607, 0.874496, -11.0315, -0.00421607, 1.1245, 7.21851, -0.00421607, 2.8745, -11.0315, -0.00421607, 1.1245, -11.7815, -0.00421607, 1.1245, -11.7815, -0.00421607, 37.6245, 25.2185, -0.00421607, 37.6245, -3.03149, -0.00421607, 0.874496, -4.78149, -0.00421607, 0.874496, -11.0315, -0.00421607, 1.1245, 7.21851, -0.00421607, 2.8745, 0.718506, -0.00421607, 0.874496, -1.03149, -0.00421607, 0.874496, -12.5315, -0.00421607, 1.1245, -13.0315, -0.00421607, 0.124496, -14.5315, -0.00421607, 0.124496, -15.0315, -0.00421607, 1.1245, -11.7815, -0.00421607, 1.1245, -12.5315, -0.00421607, 1.1245, -16.0315, -0.00421607, 1.3745, -16.0315, -0.00421607, 37.6245, -11.7815, -0.00421607, 37.6245, -12.5315, -0.00421607, 1.1245, -15.0315, -0.00421607, 1.1245, -16.0315, -0.00421607, 1.3745)
polygons = [PackedInt32Array(1, 0, 2), PackedInt32Array(2, 0, 3), PackedInt32Array(5, 4, 6), PackedInt32Array(6, 4, 7), PackedInt32Array(9, 8, 10), PackedInt32Array(10, 8, 11), PackedInt32Array(13, 12, 14), PackedInt32Array(14, 12, 15), PackedInt32Array(17, 16, 18), PackedInt32Array(18, 16, 19), PackedInt32Array(22, 21, 20), PackedInt32Array(25, 24, 23), PackedInt32Array(27, 26, 28), PackedInt32Array(28, 26, 29), PackedInt32Array(32, 31, 30), PackedInt32Array(35, 34, 33), PackedInt32Array(37, 36, 38), PackedInt32Array(38, 36, 39), PackedInt32Array(42, 41, 40), PackedInt32Array(45, 44, 43), PackedInt32Array(48, 47, 46), PackedInt32Array(51, 50, 49), PackedInt32Array(53, 52, 54), PackedInt32Array(54, 52, 56), PackedInt32Array(54, 56, 55), PackedInt32Array(59, 58, 57), PackedInt32Array(60, 62, 61), PackedInt32Array(64, 63, 65), PackedInt32Array(65, 63, 66), PackedInt32Array(69, 68, 67), PackedInt32Array(70, 73, 71), PackedInt32Array(71, 73, 72), PackedInt32Array(75, 74, 76), PackedInt32Array(76, 74, 77), PackedInt32Array(78, 81, 79), PackedInt32Array(79, 81, 80), PackedInt32Array(84, 83, 82), PackedInt32Array(86, 85, 87), PackedInt32Array(87, 85, 88), PackedInt32Array(90, 89, 91), PackedInt32Array(91, 89, 92), PackedInt32Array(94, 93, 95), PackedInt32Array(95, 93, 96), PackedInt32Array(99, 98, 97), PackedInt32Array(102, 101, 100), PackedInt32Array(105, 104, 106), PackedInt32Array(106, 104, 103), PackedInt32Array(109, 108, 107), PackedInt32Array(111, 110, 112), PackedInt32Array(112, 110, 113), PackedInt32Array(113, 110, 114), PackedInt32Array(117, 116, 115), PackedInt32Array(120, 119, 118), PackedInt32Array(122, 121, 123), PackedInt32Array(123, 121, 124), PackedInt32Array(126, 125, 127), PackedInt32Array(127, 125, 128), PackedInt32Array(128, 125, 129), PackedInt32Array(132, 131, 130)]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_lxg13"]
albedo_color = Color(0.781863, 0.28685, 0.541333, 1)

[sub_resource type="CapsuleMesh" id="CapsuleMesh_12j7t"]

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_toabv"]
points = PackedVector3Array(-0.125207, -0.532801, -0.480507, 0.0227831, 0.47607, 0.498884, 0.169713, 0.559144, 0.464172, 0.231051, -0.803591, 0.320455, 0.40741, 0.651043, -0.243523, -0.482789, 0.594843, 0.0822132, -0.362868, -0.682312, 0.289697, 0.469044, -0.654529, -0.0662713, -0.127444, 0.842701, -0.338103, -0.393435, -0.683942, -0.244717, 0.438255, 0.623309, 0.200849, 0.0841477, 0.977454, 0.114795, -0.0682023, -0.976458, -0.12927, 0.20055, -0.563129, -0.451454, -0.185527, 0.595453, -0.453475, -0.273363, 0.592268, 0.407754, -0.00693649, -0.476823, 0.49966, 0.375821, -0.588614, 0.316955, 0.111579, 0.563059, -0.481177, -0.41725, 0.527866, -0.270497, -0.484546, -0.596972, -0.0665097, -0.279747, 0.908561, 0.0533361, -0.250197, -0.880712, 0.205319, 0.263647, -0.902771, -0.127394, 0.293368, 0.871526, -0.157196, 0.373412, -0.526319, -0.328246, 0.499663, 0.476641, -0.00688856, 0.0531056, 0.875001, 0.324703, -0.154543, -0.590854, 0.465879, -0.0972799, -0.782358, -0.398188, -0.387649, -0.498171, 0.31565, -0.30068, -0.587995, -0.388901)

[node name="World" type="Node3D"]
script = ExtResource("1_gkggp")

[node name="Map" type="Node3D" parent="."]

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="Map"]
transform = Transform3D(-0.866025, -0.433013, 0.25, 0, 0.5, 0.866025, -0.5, 0.75, -0.433013, 0, 0, 0)
shadow_enabled = true

[node name="WorldEnvironment" type="WorldEnvironment" parent="Map"]
environment = SubResource("Environment_088vp")

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="Map"]
navigation_mesh = SubResource("NavigationMesh_6ipjk")

[node name="CSGBox3D2" type="CSGBox3D" parent="Map/NavigationRegion3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 7.78722, 0.705505, -5.53356)
use_collision = true
collision_layer = 4
collision_mask = 3
size = Vector3(0.176881, 3.03372, 15.7118)

[node name="CSGSphere3D" type="CSGSphere3D" parent="Map/NavigationRegion3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.08484, 0, -0.592649)
use_collision = true
collision_layer = 4
collision_mask = 3
material = SubResource("StandardMaterial3D_lxg13")

[node name="Floor" type="CSGBox3D" parent="Map/NavigationRegion3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -50.743, -0.45, -55.875)
use_collision = true
collision_layer = 4
collision_mask = 3
size = Vector3(153.077, 0.002, 188.001)

[node name="MeshInstance3D" type="MeshInstance3D" parent="Map/NavigationRegion3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.064476, 0)
layers = 2

[node name="FutureSoldier" parent="Map/NavigationRegion3D" instance=ExtResource("4_anyqg")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.92988, -0.328411, 0)
collision_layer = 2
collision_mask = 5
script = ExtResource("5_8w6w7")

[node name="FutureSoldier2" parent="Map/NavigationRegion3D" instance=ExtResource("4_anyqg")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -7.85977, -0.656822, 0)
collision_layer = 2
collision_mask = 5
script = ExtResource("5_8w6w7")

[node name="FutureSoldier3" parent="Map/NavigationRegion3D" instance=ExtResource("4_anyqg")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -11.7897, -0.985233, 0)
collision_layer = 2
collision_mask = 5
script = ExtResource("5_8w6w7")

[node name="FutureSoldier4" parent="Map/NavigationRegion3D" instance=ExtResource("4_anyqg")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -15.7195, -1.31364, 0)
collision_layer = 2
collision_mask = 5
script = ExtResource("5_8w6w7")

[node name="Player" type="CharacterBody3D" parent="Map/NavigationRegion3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0135589, -0.147188, -0.0197175)
collision_mask = 6
script = ExtResource("1_pshd1")

[node name="MeshInstance3D" type="MeshInstance3D" parent="Map/NavigationRegion3D/Player"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.170116, 0.418887, -0.175439)
mesh = SubResource("CapsuleMesh_12j7t")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Map/NavigationRegion3D/Player"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.170116, 0.418887, -0.175439)
shape = SubResource("ConvexPolygonShape3D_toabv")

[node name="Head" type="Node3D" parent="Map/NavigationRegion3D/Player"]

[node name="Camera3D" type="Camera3D" parent="Map/NavigationRegion3D/Player/Head"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.99877, 0.0830126)

[node name="Gun" parent="Map/NavigationRegion3D/Player/Head/Camera3D" instance=ExtResource("2_fc48i")]
transform = Transform3D(0.239924, 0, 0.0702588, 0.00783289, 0.248441, -0.0267483, -0.0698208, 0.0278716, 0.238429, 0.322167, -0.248334, -0.401797)

[node name="Spawns" type="Node3D" parent="Map"]

[node name="UI" type="Control" parent="."]
layout_mode = 3
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="ColorRect" type="ColorRect" parent="UI"]
visible = false
layout_mode = 0
offset_left = -102.0
offset_top = -60.0
offset_right = 945.0
offset_bottom = 661.0
color = Color(0.878431, 0.121569, 0, 0.129412)

[connection signal="player_hit" from="Map/NavigationRegion3D/Player" to="." method="_on_player_player_hit"]
